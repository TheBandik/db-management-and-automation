# Лабораторная работа №3

Работа выполняется на виртуальной машине с linux.

# Задание №1

Для настройки резервного копирования базы данных необходимо написать скрипт `bash` и настроить `cron` для его переодического запуска.

## Задание №1.1

Перед тем как приступить к выполению задания, убедитесь, что у вас есть доступ к mysql и есть база данных, которую можно копировать. Если базы нет, ее необходимо создать. Инструкция по установке mysql в линукс представлена в лекции №3.

Написать скрипт для запуска резервного копирования. Создаем файла с расширением `.sh` в любой папке. Форма скрипта:

```bash
#!/bin/bash

# Настройки подключения к базе данных
DB_HOST="localhost"
DB_USER="username"
DB_PASSWORD="password"
DB_NAME="database_name"

# Директорию для хранения бэкапов. Чтобы узнать текущий путь к папке в консоли введите pwd
BACKUP_DIR="/home/thebandik/backup"

# Создаем директорию для бэкапов, если ее еще нет
mkdir -p $BACKUP_DIR

# Имя файла бэкапа, включающее текущую дату
BACKUP_FILE="$BACKUP_DIR/$DB_NAME-$(date +%Y-%m-%d_%H-%M).sql"

# Создаем бэкап базы данных
mysqldump --opt -h $DB_HOST -u $DB_USER -p$DB_PASSWORD $DB_NAME > $BACKUP_FILE

# Уведомляем пользователя об успешном создании бэкапа
echo "MySQL backup created: $BACKUP_FILE"
```

После создания скрипта необходимо дать на него права запуска:

```bash
chmod ugo+x script.sh
```

## Задание №1.2

Теперь необходимо настроить `cron` для запуска скрипта по расписанию.

1. Откройте терминал и введите команду `crontab -e` для редактирования файла `cron`:

```bash
crontab -e
```

При первом запуске попросит выбрать редактор. Выберете `nano` или любой другой по вашему желанию.

2. Добавьте в файл `cron` строку вида:

```bash
* * * * * /home/thebandik/backup/script.sh
```

Звездочки означают каждый и могут быть интерпретированы как:

```
minute hour day_of_month month day_of_week
```

Например следующая команда будет запускать скрипт в 13:00 каждый вторник:

```bash
0 13 * * 2 /home/thebandik/backup/script.sh
```

Необходимо написать команду для запуска скрипта каждые 5 минут и еще одну команду, которая будет запускать каждый день в 3 часа ночи.
